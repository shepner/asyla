# Cloudflare Tunnel (cloudflared) for d03
# Provides internet access to d03 applications via Cloudflare Tunnel
#
# Setup:
# 1. Create tunnel in Cloudflare Zero Trust dashboard, get TUNNEL_TOKEN
# 2. Set TUNNEL_TOKEN in ~/scripts/d03/apps/cloudflared/.env (copy from .env.example)
# 3. Add app networks below as apps are added
# 4. Configure Public Hostnames in Cloudflare dashboard (or via API)

services:
  cloudflared:
    image: cloudflare/cloudflared:latest
    container_name: cloudflared-d03
    restart: unless-stopped
    command: ["tunnel", "run", "--token", "${TUNNEL_TOKEN}"]
    environment:
      - TUNNEL_TOKEN=${TUNNEL_TOKEN}
    networks:
      - tc_datalogger_net

networks:
  tc_datalogger_net:
    external: true
    name: tc_datalogger_net
