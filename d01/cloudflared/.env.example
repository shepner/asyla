# Cloudflare Tunnel Configuration
# Copy this file to .env and fill in your values
# DO NOT commit .env to git - it contains secrets

# =============================================================================
# How to get the IDs and tokens
# =============================================================================
#
# 1. CLOUDFLARE_ACCOUNT_ID
#    - Log in at https://dash.cloudflare.com
#    - Select your domain (e.g. asyla.org)
#    - Right column: "Account ID" (or Zero Trust → Networks → Tunnels; ID is in the URL)
#
# 2. CLOUDFLARE_ZONE_ID
#    - Dashboard → select the same domain
#    - Right column: "Zone ID" (or DNS → right column / URL)
#
# 3. CLOUDFLARE_API_TOKEN
#    - https://dash.cloudflare.com/profile/api-tokens → Create Token → Custom
#    - Permissions: Account → Cloudflare Tunnel → Edit; Zone → DNS → Edit;
#      Account → Access: Apps and Policies → Edit (for Access automation).
#      Optional: Account → Access: Organizations, Identity Providers, and Groups → Read (Read is enough)
#      (so the script can set allowed_idps; otherwise account defaults are used)
#    - Account resources: Include → Your account
#    - Zone resources: Include → Specific zone → your domain
#    - Create Token, copy the token once (store safely); paste below
#
# 4. TUNNEL_ID (optional – only if reusing an existing tunnel)
#    - Zero Trust → Networks → Tunnels → click tunnel → UUID in URL or details
#    - Leave unset to have setup-tunnel-api.py create a new tunnel
#
# 5. TUNNEL_TOKEN (for cloudflared on d01)
#    - Not from the dashboard. Set CLOUDFLARE_ACCOUNT_ID, ZONE_ID, API_TOKEN above,
#      then run: ./setup-tunnel-api.py
#    - Copy the printed "TUNNEL_TOKEN=..." line into .env on d01
#
# =============================================================================

# For setup-tunnel-api.py (run where you have API credentials):
CLOUDFLARE_ACCOUNT_ID=
CLOUDFLARE_ZONE_ID=
CLOUDFLARE_API_TOKEN=
# Optional: reuse existing tunnel; Access app name for auth
# TUNNEL_ID=your-tunnel-uuid
# TUNNEL_NAME=d01
# CLOUDFLARE_ACCESS_APP_NAME=d01 media

# For cloudflared on d01 (from setup-tunnel-api.py output or dashboard):
TUNNEL_TOKEN=your-tunnel-token-here

# --- Legacy: config file mode (no API) ---
# Create tunnel once in dashboard, save credentials as credentials.json, set TUNNEL_ID,
# then: ./generate-config.sh  and  docker compose -f docker-compose.yml -f docker-compose.config.yml up -d
# TUNNEL_ID=your-tunnel-uuid-here
